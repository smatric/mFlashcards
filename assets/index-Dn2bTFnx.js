var Qe=Object.defineProperty;var Ze=(e,n,t)=>n in e?Qe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var _e=(e,n,t)=>Ze(e,typeof n!="symbol"?n+"":n,t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function H(){}function Re(e){return e()}function Oe(){return Object.create(null)}function le(e){e.forEach(Re)}function He(e){return typeof e=="function"}function Pe(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}function $e(e){return Object.keys(e).length===0}function i(e,n){e.appendChild(n)}function A(e,n,t){e.insertBefore(n,t||null)}function I(e){e.parentNode&&e.parentNode.removeChild(e)}function d(e){return document.createElement(e)}function D(e){return document.createTextNode(e)}function x(){return D(" ")}function Ge(){return D("")}function M(e,n,t,o){return e.addEventListener(n,t,o),()=>e.removeEventListener(n,t,o)}function l(e,n,t){t==null?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function et(e){return Array.from(e.childNodes)}function R(e,n){n=""+n,e.data!==n&&(e.data=n)}function se(e,n,t,o){t==null?e.style.removeProperty(n):e.style.setProperty(n,t,"")}function tt(e,n,{bubbles:t=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:n,bubbles:t,cancelable:o})}let we;function me(e){we=e}function Be(){if(!we)throw new Error("Function called outside component initialization");return we}function nt(e){Be().$$.on_mount.push(e)}function Xe(){const e=Be();return(n,t,{cancelable:o=!1}={})=>{const s=e.$$.callbacks[n];if(s){const r=tt(n,t,{cancelable:o});return s.slice().forEach(h=>{h.call(e,r)}),!r.defaultPrevented}return!0}}const fe=[],ke=[];let ge=[];const Se=[],ot=Promise.resolve();let Ce=!1;function it(){Ce||(Ce=!0,ot.then(qe))}function De(e){ge.push(e)}function rt(e){Se.push(e)}const ye=new Set;let ue=0;function qe(){if(ue!==0)return;const e=we;do{try{for(;ue<fe.length;){const n=fe[ue];ue++,me(n),st(n.$$)}}catch(n){throw fe.length=0,ue=0,n}for(me(null),fe.length=0,ue=0;ke.length;)ke.pop()();for(let n=0;n<ge.length;n+=1){const t=ge[n];ye.has(t)||(ye.add(t),t())}ge.length=0}while(fe.length);for(;Se.length;)Se.pop()();Ce=!1,ye.clear(),me(e)}function st(e){if(e.fragment!==null){e.update(),le(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(De)}}function lt(e){const n=[],t=[];ge.forEach(o=>e.indexOf(o)===-1?n.push(o):t.push(o)),t.forEach(o=>o()),ge=n}const be=new Set;let de;function Ye(){de={r:0,c:[],p:de}}function Ke(){de.r||le(de.c),de=de.p}function ce(e,n){e&&e.i&&(be.delete(e),e.i(n))}function he(e,n,t,o){if(e&&e.o){if(be.has(e))return;be.add(e),de.c.push(()=>{be.delete(e),o&&(t&&e.d(1),o())}),e.o(n)}else o&&o()}function at(e,n,t){const o=e.$$.props[n];o!==void 0&&(e.$$.bound[o]=t,t(e.$$.ctx[o]))}function Je(e){e&&e.c()}function Te(e,n,t){const{fragment:o,after_update:s}=e.$$;o&&o.m(n,t),De(()=>{const r=e.$$.on_mount.map(Re).filter(He);e.$$.on_destroy?e.$$.on_destroy.push(...r):le(r),e.$$.on_mount=[]}),s.forEach(De)}function Ee(e,n){const t=e.$$;t.fragment!==null&&(lt(t.after_update),le(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function dt(e,n){e.$$.dirty[0]===-1&&(fe.push(e),it(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function Ie(e,n,t,o,s,r,h=null,g=[-1]){const w=we;me(e);const c=e.$$={fragment:null,ctx:[],props:r,update:H,not_equal:s,bound:Oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(w?w.$$.context:[])),callbacks:Oe(),dirty:g,skip_bound:!1,root:n.target||w.$$.root};h&&h(c.root);let u=!1;if(c.ctx=t?t(e,n.props||{},(a,f,...p)=>{const y=p.length?p[0]:f;return c.ctx&&s(c.ctx[a],c.ctx[a]=y)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](y),u&&dt(e,a)),f}):[],c.update(),u=!0,le(c.before_update),c.fragment=o?o(c.ctx):!1,n.target){if(n.hydrate){const a=et(n.target);c.fragment&&c.fragment.l(a),a.forEach(I)}else c.fragment&&c.fragment.c();n.intro&&ce(e.$$.fragment),Te(e,n.target,n.anchor),qe()}me(w)}class Me{constructor(){_e(this,"$$");_e(this,"$$set")}$destroy(){Ee(this,1),this.$destroy=H}$on(n,t){if(!He(t))return H;const o=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return o.push(t),()=>{const s=o.indexOf(t);s!==-1&&o.splice(s,1)}}$set(n){this.$$set&&!$e(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const ct="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ct);function je(e){let n,t,o,s,r,h,g,w,c=e[8]?"Word":"Definition",u,a,f,p,y=(e[8]?e[1].word:e[1].definition)+"",v,_,C,P,N,G=e[8]?"definition":"word",J,T,z,B,X,O,q,Q=e[8]?"Definition":"Word",j,Y,W,b,ee=(e[8]?e[1].definition:e[1].word)+"",Z,K,ne,re,$,oe,m,k,L,V,F="speechSynthesis"in window&&(e[8]?e[1].word:e[1].definition)===e[1].word&&Le(e),E="speechSynthesis"in window&&(e[8]?e[1].definition:e[1].word)===e[1].word&&Ne(e);return{c(){n=d("div"),t=d("div"),o=d("div"),s=d("div"),r=d("div"),h=x(),g=d("div"),w=d("div"),u=D(c),a=x(),f=d("div"),p=d("div"),v=D(y),_=x(),F&&F.c(),C=x(),P=d("div"),N=D("Click to reveal "),J=D(G),T=x(),z=d("div"),B=d("div"),X=x(),O=d("div"),q=d("div"),j=D(Q),Y=x(),W=d("div"),b=d("div"),Z=D(ee),K=x(),E&&E.c(),re=x(),$=d("div"),oe=d("button"),oe.textContent="Hard",m=x(),k=d("button"),k.textContent="Easy",l(r,"class","absolute inset-0 rounded-xl transition-all duration-75 ease-out svelte-bpxev9"),se(r,"background-color",e[7]),se(r,"pointer-events","none"),l(w,"class","text-sm text-gray-500 dark:text-gray-400 mb-2"),l(p,"class","text-2xl md:text-3xl font-semibold text-gray-800 dark:text-white break-words"),l(f,"class","flex items-center justify-center gap-3 mb-6"),l(P,"class","text-sm text-gray-500 dark:text-gray-400"),l(g,"class","text-center relative z-10 svelte-bpxev9"),l(s,"class","flashcard-face flashcard-front bg-white dark:bg-gray-800 shadow-xl rounded-xl p-8 min-h-[300px] flex items-center justify-center relative svelte-bpxev9"),l(B,"class","absolute inset-0 rounded-xl transition-all duration-75 ease-out svelte-bpxev9"),se(B,"background-color",e[7]),se(B,"pointer-events","none"),l(q,"class","text-sm text-gray-600 dark:text-gray-300 mb-2"),l(b,"class","text-2xl md:text-3xl font-semibold text-blue-800 dark:text-blue-200 break-words"),l(W,"class","flex items-center justify-center gap-3"),l(O,"class","text-center relative z-20 svelte-bpxev9"),l(z,"class","flashcard-face flashcard-back bg-blue-50 dark:bg-blue-900 shadow-xl rounded-xl p-8 min-h-[300px] flex items-center justify-center relative svelte-bpxev9"),l(o,"class",ne="flashcard-container cursor-pointer transform-style-preserve-3d "+(e[6]?"transition-all duration-200":"")+" "+(e[0]?"rotate-y-180":"")+" svelte-bpxev9"),se(o,"transform","translateX("+e[2]+"px) "+(e[0]?"rotateY(180deg)":"")),se(o,"opacity",e[5]),l(o,"role","button"),l(o,"tabindex","0"),l(t,"class","relative perspective-1000 mb-8 svelte-bpxev9"),l(oe,"class","bg-red-500 hover:bg-red-600 text-white font-medium px-8 py-3 rounded-lg transition-colors duration-200"),l(k,"class","bg-green-500 hover:bg-green-600 text-white font-medium px-8 py-3 rounded-lg transition-colors duration-200"),l($,"class","flex gap-6 justify-center mt-6"),l(n,"class","max-w-2xl mx-auto")},m(S,U){A(S,n,U),i(n,t),i(t,o),i(o,s),i(s,r),i(s,h),i(s,g),i(g,w),i(w,u),i(g,a),i(g,f),i(f,p),i(p,v),i(f,_),F&&F.m(f,null),i(g,C),i(g,P),i(P,N),i(P,J),i(o,T),i(o,z),i(z,B),i(z,X),i(z,O),i(O,q),i(q,j),i(O,Y),i(O,W),i(W,b),i(b,Z),i(W,K),E&&E.m(W,null),e[21](o),i(n,re),i(n,$),i($,oe),i($,m),i($,k),L||(V=[M(o,"click",e[22]),M(o,"keydown",e[23]),M(o,"mousedown",e[12]),M(o,"mousemove",e[13]),M(o,"mouseup",e[14]),M(o,"mouseleave",e[14]),M(o,"touchstart",e[12]),M(o,"touchmove",e[13]),M(o,"touchend",e[14]),M(oe,"click",e[11]),M(k,"click",e[10])],L=!0)},p(S,U){U&128&&se(r,"background-color",S[7]),U&256&&c!==(c=S[8]?"Word":"Definition")&&R(u,c),U&258&&y!==(y=(S[8]?S[1].word:S[1].definition)+"")&&R(v,y),"speechSynthesis"in window&&(S[8]?S[1].word:S[1].definition)===S[1].word?F?F.p(S,U):(F=Le(S),F.c(),F.m(f,null)):F&&(F.d(1),F=null),U&256&&G!==(G=S[8]?"definition":"word")&&R(J,G),U&128&&se(B,"background-color",S[7]),U&256&&Q!==(Q=S[8]?"Definition":"Word")&&R(j,Q),U&258&&ee!==(ee=(S[8]?S[1].definition:S[1].word)+"")&&R(Z,ee),"speechSynthesis"in window&&(S[8]?S[1].definition:S[1].word)===S[1].word?E?E.p(S,U):(E=Ne(S),E.c(),E.m(W,null)):E&&(E.d(1),E=null),U&65&&ne!==(ne="flashcard-container cursor-pointer transform-style-preserve-3d "+(S[6]?"transition-all duration-200":"")+" "+(S[0]?"rotate-y-180":"")+" svelte-bpxev9")&&l(o,"class",ne),U&5&&se(o,"transform","translateX("+S[2]+"px) "+(S[0]?"rotateY(180deg)":"")),U&32&&se(o,"opacity",S[5])},d(S){S&&I(n),F&&F.d(),E&&E.d(),e[21](null),L=!1,le(V)}}}function Le(e){let n,t,o;return{c(){n=d("button"),n.innerHTML='<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>',l(n,"class","flex-shrink-0 p-2 rounded-full bg-blue-100 hover:bg-blue-200 dark:bg-blue-800 dark:hover:bg-blue-700 transition-colors duration-200 text-blue-600 dark:text-blue-300 relative z-50"),l(n,"title","Play pronunciation")},m(s,r){A(s,n,r),t||(o=M(n,"click",e[19]),t=!0)},p:H,d(s){s&&I(n),t=!1,o()}}}function Ne(e){let n,t,o;return{c(){n=d("button"),n.innerHTML='<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>',l(n,"class","flex-shrink-0 p-2 rounded-full bg-blue-200 hover:bg-blue-300 dark:bg-blue-700 dark:hover:bg-blue-600 transition-colors duration-200 text-blue-700 dark:text-blue-200 relative z-50"),l(n,"title","Play pronunciation")},m(s,r){A(s,n,r),t||(o=M(n,"click",e[20]),t=!0)},p:H,d(s){s&&I(n),t=!1,o()}}}function ut(e){let n,t=e[1]&&je(e);return{c(){t&&t.c(),n=Ge()},m(o,s){t&&t.m(o,s),A(o,n,s)},p(o,[s]){o[1]?t?t.p(o,s):(t=je(o),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},i:H,o:H,d(o){o&&I(n),t&&t.d(o)}}}function We(e){"speechSynthesis"in window&&(window.speechSynthesis.cancel(),setTimeout(()=>{const n=new SpeechSynthesisUtterance(e);n.rate=.8,n.volume=.7,n.lang="en-US";const t=()=>{const s=window.speechSynthesis.getVoices();if(s.length>0){const r=s.find(h=>h.lang.startsWith("en")||h.lang.includes("en"));r&&(n.voice=r)}try{window.speechSynthesis.speak(n)}catch(r){console.error("Speech synthesis error:",r);const h=new SpeechSynthesisUtterance(e);h.rate=.8,h.volume=.7,h.lang="en-US",window.speechSynthesis.speak(h)}};window.speechSynthesis.getVoices().length===0?(window.speechSynthesis.addEventListener("voiceschanged",t,{once:!0}),setTimeout(t,100)):t()},50))}function ft(e,n,t){let o,s,r,h;const g=Xe();let{currentCard:w}=n,{studyMode:c="word-to-definition"}=n,{showDefinition:u=!1}=n,a,f=!1,p=0,y=0,v=0,_=!1,C=1,P=!0,N=!1;function G(){t(0,u=!u)}function J(){g("known")}function T(){g("unknown")}function z(b){_||(t(16,f=!0),N=!1,p=b.type==="mousedown"?b.clientX:b.touches[0].clientX,y=p,t(2,v=0))}function B(b){!f||_||(b.preventDefault(),y=b.type==="mousemove"?b.clientX:b.touches[0].clientX,t(2,v=y-p),Math.abs(v)>5&&(N=!0),t(2,v=Math.max(-200,Math.min(200,v))))}function X(b){if(!f||_)return;t(16,f=!1);const ee=80;v>ee?(b&&b.preventDefault(),t(3,_=!0),O(()=>J())):v<-ee?(b&&b.preventDefault(),t(3,_=!0),O(()=>T())):N?(b&&b.preventDefault(),t(3,_=!0),t(2,v=0),setTimeout(()=>{t(3,_=!1)},200)):t(3,_=!1)}function O(b){t(2,v=v>0?400:-400),setTimeout(()=>{b(),t(6,P=!1),t(5,C=0),t(2,v=0),setTimeout(()=>{t(6,P=!0),t(5,C=1),t(3,_=!1),N=!1},100)},200)}const q=b=>{b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),We(w.word)},Q=b=>{b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),We(w.word)};function j(b){ke[b?"unshift":"push"](()=>{a=b,t(4,a)})}const Y=b=>{_||G()},W=b=>b.key===" "&&G();return e.$$set=b=>{"currentCard"in b&&t(1,w=b.currentCard),"studyMode"in b&&t(15,c=b.studyMode),"showDefinition"in b&&t(0,u=b.showDefinition)},e.$$.update=()=>{e.$$.dirty&10&&w&&!_&&t(0,u=!1),e.$$.dirty&32768&&t(8,o=c==="word-to-definition"),e.$$.dirty&4&&t(17,s=Math.min(Math.abs(v)/150,.3)),e.$$.dirty&4&&t(18,r=v>0?"right":"left"),e.$$.dirty&458756&&t(7,h=f&&Math.abs(v)>20?r==="right"?`rgba(34, 197, 94, ${s})`:`rgba(239, 68, 68, ${s})`:"transparent")},[u,w,v,_,a,C,P,h,o,G,J,T,z,B,X,c,f,s,r,q,Q,j,Y,W]}class gt extends Me{constructor(n){super(),Ie(this,n,ft,ut,Pe,{currentCard:1,studyMode:15,showDefinition:0})}}function ht(e){let n;return{c(){n=D("📁 Browse Google Drive")},m(t,o){A(t,n,o)},d(t){t&&I(n)}}}function pt(e){let n;return{c(){n=D("Picker Failed to Load")},m(t,o){A(t,n,o)},d(t){t&&I(n)}}}function mt(e){let n;return{c(){n=D("Loading Picker...")},m(t,o){A(t,n,o)},d(t){t&&I(n)}}}function wt(e){let n,t,o,s,r,h,g,w,c,u,a,f;function p(_,C){return _[1]?mt:_[0]?ht:pt}let y=p(e),v=y(e);return{c(){n=d("div"),t=d("div"),o=d("h2"),o.textContent="📊 Select Spreadsheet",s=x(),r=d("p"),r.textContent="Choose a Google Sheets document containing your flashcard data.",h=x(),g=d("p"),g.textContent=`Make sure your spreadsheet has a "mFlashcards" sheet with "Word" and "Definition" columns,
      and optionally a "StatsData" sheet for saving progress.`,w=x(),c=d("button"),v.c(),l(o,"class","text-2xl font-semibold mb-4 text-gray-800 dark:text-white"),l(r,"class","text-gray-600 dark:text-gray-300 mb-6"),l(g,"class","text-sm text-gray-500 dark:text-gray-400 mb-6"),c.disabled=u=!e[0]||e[1],l(c,"class","bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200"),l(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md mx-auto"),l(n,"class","text-center")},m(_,C){A(_,n,C),i(n,t),i(t,o),i(t,s),i(t,r),i(t,h),i(t,g),i(t,w),i(t,c),v.m(c,null),a||(f=M(c,"click",e[2]),a=!0)},p(_,[C]){y!==(y=p(_))&&(v.d(1),v=y(_),v&&(v.c(),v.m(c,null))),C&3&&u!==(u=!_[0]||_[1])&&(c.disabled=u)},i:H,o:H,d(_){_&&I(n),v.d(),a=!1,f()}}}function bt(){return new Promise(e=>{const n=()=>{typeof window.gapi<"u"&&typeof window.google<"u"?e():setTimeout(n,100)};n()})}function kt(){var e;return(e=window.gapi.client.getToken())==null?void 0:e.access_token}function vt(e,n,t){const o=Xe();let s=!1,r=!0;async function h(){try{await bt(),await g()}catch(u){console.error("Failed to initialize picker:",u)}finally{t(1,r=!1)}}function g(){return new Promise((u,a)=>{window.gapi.load("picker",{callback:()=>{t(0,s=!0),u()},onerror:a})})}function w(){if(s&&window.gapi.client.getToken()){const u=kt(),a=localStorage.getItem("google_token_expiration");if(a){const y=parseInt(a);if(Date.now()>=y-5*60*1e3){alert("Your session has expired. Please refresh the page and sign in again.");return}}const f=new google.picker.View(google.picker.ViewId.SPREADSHEETS);f.setMimeTypes("application/vnd.google-apps.spreadsheet"),new google.picker.PickerBuilder().enableFeature(google.picker.Feature.SUPPORT_DRIVES).setOAuthToken(u).addView(f).setCallback(c).build().setVisible(!0)}else alert("Authentication required. Please refresh the page and sign in again.")}function c(u){if(u.action===google.picker.Action.PICKED){const a=u.docs[0].id,f=u.docs[0].name;o("selected",{id:a,name:f})}}return typeof window<"u"&&h(),[s,r,w]}class _t extends Me{constructor(n){super(),Ie(this,n,vt,wt,Pe,{})}}function yt(e){let n,t,o,s,r,h,g=e[6].total>0&&ze(e);const w=[Tt,Pt,Dt,Ct,St],c=[];function u(f,p){return f[4]?f[7]?1:f[10]&&!f[9]?2:f[9]?3:4:0}t=u(e),o=c[t]=w[t](e);let a=(!e[10]||e[7])&&Ue(e);return{c(){g&&g.c(),n=x(),o.c(),s=x(),a&&a.c(),r=Ge()},m(f,p){g&&g.m(f,p),A(f,n,p),c[t].m(f,p),A(f,s,p),a&&a.m(f,p),A(f,r,p),h=!0},p(f,p){f[6].total>0?g?g.p(f,p):(g=ze(f),g.c(),g.m(n.parentNode,n)):g&&(g.d(1),g=null);let y=t;t=u(f),t===y?c[t].p(f,p):(Ye(),he(c[y],1,1,()=>{c[y]=null}),Ke(),o=c[t],o?o.p(f,p):(o=c[t]=w[t](f),o.c()),ce(o,1),o.m(s.parentNode,s)),!f[10]||f[7]?a?a.p(f,p):(a=Ue(f),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},i(f){h||(ce(o),h=!0)},o(f){he(o),h=!1},d(f){f&&(I(n),I(s),I(r)),g&&g.d(f),c[t].d(f),a&&a.d(f)}}}function xt(e){let n,t,o,s,r,h,g,w,c;return{c(){n=d("div"),t=d("div"),o=d("h2"),o.textContent="Welcome!",s=x(),r=d("p"),r.textContent="Sign in with your Google account to access your flashcard spreadsheets.",h=x(),g=d("button"),g.textContent="Sign in with Google",l(o,"class","text-2xl font-semibold mb-4 text-gray-800 dark:text-white"),l(r,"class","text-gray-600 dark:text-gray-300 mb-6"),l(g,"class","bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200"),l(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md mx-auto"),l(n,"class","text-center")},m(u,a){A(u,n,a),i(n,t),i(t,o),i(t,s),i(t,r),i(t,h),i(t,g),w||(c=M(g,"click",e[12]),w=!0)},p:H,i:H,o:H,d(u){u&&I(n),w=!1,c()}}}function ze(e){let n,t,o,s=e[6].known+"",r,h,g=e[6].unknown+"",w,c,u=e[6].total+"",a,f,p,y,v;return{c(){n=d("div"),t=d("div"),o=d("span"),r=D(s),h=D(" ✅ "),w=D(g),c=D(" ❌ / "),a=D(u),f=x(),p=d("button"),p.textContent="Reset Deck",l(o,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),l(p,"class","ml-4 bg-orange-500 hover:bg-orange-600 text-white px-3 py-1 rounded text-sm transition-colors duration-200"),l(t,"class","bg-white dark:bg-gray-800 px-4 py-2 rounded-lg shadow"),l(n,"class","flex justify-center mb-6")},m(_,C){A(_,n,C),i(n,t),i(t,o),i(o,r),i(o,h),i(o,w),i(o,c),i(o,a),i(t,f),i(t,p),y||(v=M(p,"click",e[15]),y=!0)},p(_,C){C[0]&64&&s!==(s=_[6].known+"")&&R(r,s),C[0]&64&&g!==(g=_[6].unknown+"")&&R(w,g),C[0]&64&&u!==(u=_[6].total+"")&&R(a,u)},d(_){_&&I(n),y=!1,v()}}}function St(e){let n,t,o,s,r,h,g,w,c,u,a,f=e[3]?`Signed in as ${e[3].name}`:"Signed in",p,y,v,_,C;return{c(){n=d("div"),t=d("div"),o=d("h3"),o.textContent="No flashcards found",s=x(),r=d("p"),r.textContent='Make sure your spreadsheet has a "mFlashcards" sheet with "Word" and "Definition" columns.',h=x(),g=d("button"),g.textContent="Choose Different Spreadsheet",w=x(),c=d("div"),u=d("div"),a=d("span"),p=D(f),y=x(),v=d("button"),v.textContent="Sign Out",l(o,"class","text-xl font-semibold mb-4 text-gray-800 dark:text-white"),l(r,"class","text-gray-600 dark:text-gray-300 mb-4"),l(g,"class","bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200"),l(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"),l(a,"class","text-gray-600 dark:text-gray-300 text-sm"),l(v,"class","bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 text-sm"),l(u,"class","flex justify-center items-center gap-4"),l(c,"class","text-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-700"),l(n,"class","text-center")},m(P,N){A(P,n,N),i(n,t),i(t,o),i(t,s),i(t,r),i(t,h),i(t,g),i(n,w),i(n,c),i(c,u),i(u,a),i(a,p),i(u,y),i(u,v),_||(C=[M(g,"click",e[24]),M(v,"click",e[13])],_=!0)},p(P,N){N[0]&8&&f!==(f=P[3]?`Signed in as ${P[3].name}`:"Signed in")&&R(p,f)},i:H,o:H,d(P){P&&I(n),_=!1,le(C)}}}function Ct(e){let n,t,o,s,r,h,g=e[0].length+"",w,c,u,a,f,p,y,v,_,C=e[6].total+"",P,N,G,J,T,z,B=e[6].known+"",X,O,q,Q,j,Y,W=e[6].unknown+"",b,ee,Z,K,ne,re,$,oe,m,k,L,V,F,E,S=e[3]?`Signed in as ${e[3].name}`:"Signed in",U,Ae,pe,ve,Fe,te=e[6].total>0&&Ve(e);return{c(){n=d("div"),t=d("div"),o=d("h2"),o.textContent="🎉 Deck Complete!",s=x(),r=d("p"),h=D("You've finished all "),w=D(g),c=D(" cards in this deck."),u=x(),a=d("div"),f=d("h3"),f.textContent="Session Stats",p=x(),y=d("div"),v=d("div"),_=d("div"),P=D(C),N=x(),G=d("div"),G.textContent="Total",J=x(),T=d("div"),z=d("div"),X=D(B),O=x(),q=d("div"),q.textContent="Known",Q=x(),j=d("div"),Y=d("div"),b=D(W),ee=x(),Z=d("div"),Z.textContent="Unknown",K=x(),te&&te.c(),ne=x(),re=d("div"),$=d("button"),$.textContent="🔄 Study Again",oe=x(),m=d("div"),k=d("button"),k.textContent="Choose Different Spreadsheet",L=x(),V=d("div"),F=d("div"),E=d("span"),U=D(S),Ae=x(),pe=d("button"),pe.textContent="Sign Out",l(o,"class","text-3xl font-bold mb-4 text-gray-800 dark:text-white"),l(r,"class","text-gray-600 dark:text-gray-300 mb-6"),l(f,"class","text-lg font-semibold mb-4 text-gray-800 dark:text-white"),l(_,"class","text-2xl font-bold text-blue-600 dark:text-blue-400"),l(G,"class","text-sm text-gray-600 dark:text-gray-300"),l(z,"class","text-2xl font-bold text-green-600 dark:text-green-400"),l(q,"class","text-sm text-gray-600 dark:text-gray-300"),l(Y,"class","text-2xl font-bold text-red-600 dark:text-red-400"),l(Z,"class","text-sm text-gray-600 dark:text-gray-300"),l(y,"class","grid grid-cols-3 gap-4 text-center"),l(a,"class","bg-gray-50 dark:bg-gray-700 rounded-lg p-6 mb-6"),l($,"class","bg-blue-500 hover:bg-blue-600 text-white font-medium px-6 py-3 rounded-lg transition-colors duration-200"),l(re,"class","flex justify-center"),l(k,"class","text-blue-500 hover:text-blue-600 underline"),l(m,"class","mt-6"),l(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md mx-auto"),l(E,"class","text-gray-600 dark:text-gray-300 text-sm"),l(pe,"class","bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 text-sm"),l(F,"class","flex justify-center items-center gap-4"),l(V,"class","text-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-700"),l(n,"class","text-center")},m(ie,ae){A(ie,n,ae),i(n,t),i(t,o),i(t,s),i(t,r),i(r,h),i(r,w),i(r,c),i(t,u),i(t,a),i(a,f),i(a,p),i(a,y),i(y,v),i(v,_),i(_,P),i(v,N),i(v,G),i(y,J),i(y,T),i(T,z),i(z,X),i(T,O),i(T,q),i(y,Q),i(y,j),i(j,Y),i(Y,b),i(j,ee),i(j,Z),i(a,K),te&&te.m(a,null),i(t,ne),i(t,re),i(re,$),i(t,oe),i(t,m),i(m,k),i(n,L),i(n,V),i(V,F),i(F,E),i(E,U),i(F,Ae),i(F,pe),ve||(Fe=[M($,"click",e[20]),M(k,"click",e[23]),M(pe,"click",e[13])],ve=!0)},p(ie,ae){ae[0]&1&&g!==(g=ie[0].length+"")&&R(w,g),ae[0]&64&&C!==(C=ie[6].total+"")&&R(P,C),ae[0]&64&&B!==(B=ie[6].known+"")&&R(X,B),ae[0]&64&&W!==(W=ie[6].unknown+"")&&R(b,W),ie[6].total>0?te?te.p(ie,ae):(te=Ve(ie),te.c(),te.m(a,null)):te&&(te.d(1),te=null),ae[0]&8&&S!==(S=ie[3]?`Signed in as ${ie[3].name}`:"Signed in")&&R(U,S)},i:H,o:H,d(ie){ie&&I(n),te&&te.d(),ve=!1,le(Fe)}}}function Dt(e){let n,t,o,s=e[1]+1+"",r,h,g=e[0].length+"",w,c,u,a,f,p,y,v,_,C,P,N=e[8]==="word-to-definition"?"Word → Definition":"Definition → Word",G,J,T,z,B,X,O,q,Q,j,Y,W=e[3]?`Signed in as ${e[3].name}`:"Signed in",b,ee,Z,K,ne,re;function $(m){e[21](m)}let oe={currentCard:e[11],studyMode:e[8]};return e[5]!==void 0&&(oe.showDefinition=e[5]),T=new gt({props:oe}),ke.push(()=>at(T,"showDefinition",$)),T.$on("known",e[18]),T.$on("unknown",e[19]),T.$on("next",e[17]),{c(){n=d("div"),t=d("span"),o=D("Card "),r=D(s),h=D(" of "),w=D(g),c=x(),u=d("div"),a=d("span"),a.textContent="Study Mode:",f=x(),p=d("button"),y=d("span"),C=x(),P=d("span"),G=D(N),J=x(),Je(T.$$.fragment),B=x(),X=d("div"),O=d("button"),O.textContent="Choose Different Spreadsheet",q=x(),Q=d("div"),j=d("div"),Y=d("span"),b=D(W),ee=x(),Z=d("button"),Z.textContent="Sign Out",l(t,"class","text-gray-600 dark:text-gray-300"),l(a,"class","text-sm text-gray-600 dark:text-gray-300 hidden sm:inline"),l(y,"class",v="inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 "+(e[8]==="word-to-definition"?"translate-x-6":"translate-x-1")),l(p,"class",_="relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 "+(e[8]==="word-to-definition"?"bg-blue-500":"bg-gray-400")),l(P,"class","text-sm text-gray-600 dark:text-gray-300 min-w-0"),l(u,"class","flex items-center gap-3"),l(n,"class","flex justify-between items-center mb-4"),l(O,"class","text-blue-500 hover:text-blue-600 underline"),l(X,"class","text-center mt-6"),l(Y,"class","text-gray-600 dark:text-gray-300 text-sm"),l(Z,"class","bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 text-sm"),l(j,"class","flex justify-center items-center gap-4"),l(Q,"class","text-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-700")},m(m,k){A(m,n,k),i(n,t),i(t,o),i(t,r),i(t,h),i(t,w),i(n,c),i(n,u),i(u,a),i(u,f),i(u,p),i(p,y),i(u,C),i(u,P),i(P,G),A(m,J,k),Te(T,m,k),A(m,B,k),A(m,X,k),i(X,O),A(m,q,k),A(m,Q,k),i(Q,j),i(j,Y),i(Y,b),i(j,ee),i(j,Z),K=!0,ne||(re=[M(p,"click",e[16]),M(O,"click",e[22]),M(Z,"click",e[13])],ne=!0)},p(m,k){(!K||k[0]&2)&&s!==(s=m[1]+1+"")&&R(r,s),(!K||k[0]&1)&&g!==(g=m[0].length+"")&&R(w,g),(!K||k[0]&256&&v!==(v="inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 "+(m[8]==="word-to-definition"?"translate-x-6":"translate-x-1")))&&l(y,"class",v),(!K||k[0]&256&&_!==(_="relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 "+(m[8]==="word-to-definition"?"bg-blue-500":"bg-gray-400")))&&l(p,"class",_),(!K||k[0]&256)&&N!==(N=m[8]==="word-to-definition"?"Word → Definition":"Definition → Word")&&R(G,N);const L={};k[0]&2048&&(L.currentCard=m[11]),k[0]&256&&(L.studyMode=m[8]),!z&&k[0]&32&&(z=!0,L.showDefinition=m[5],rt(()=>z=!1)),T.$set(L),(!K||k[0]&8)&&W!==(W=m[3]?`Signed in as ${m[3].name}`:"Signed in")&&R(b,W)},i(m){K||(ce(T.$$.fragment,m),K=!0)},o(m){he(T.$$.fragment,m),K=!1},d(m){m&&(I(n),I(J),I(B),I(X),I(q),I(Q)),Ee(T,m),ne=!1,le(re)}}}function Pt(e){let n;return{c(){n=d("div"),n.innerHTML='<div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div> <p class="text-gray-600 dark:text-gray-300">Loading flashcards...</p></div>',l(n,"class","text-center")},m(t,o){A(t,n,o)},p:H,i:H,o:H,d(t){t&&I(n)}}}function Tt(e){let n,t;return n=new _t({}),n.$on("selected",e[14]),{c(){Je(n.$$.fragment)},m(o,s){Te(n,o,s),t=!0},p:H,i(o){t||(ce(n.$$.fragment,o),t=!0)},o(o){he(n.$$.fragment,o),t=!1},d(o){Ee(n,o)}}}function Ve(e){let n,t,o,s=Math.round(e[6].known/e[6].total*100)+"",r,h,g,w,c;return{c(){n=d("div"),t=d("div"),o=D("Accuracy: "),r=D(s),h=D("%"),g=x(),w=d("div"),c=d("div"),l(t,"class","text-sm text-gray-600 dark:text-gray-300 mb-2"),l(c,"class","bg-green-500 h-2 rounded-full transition-all duration-300"),se(c,"width",e[6].known/e[6].total*100+"%"),l(w,"class","w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2"),l(n,"class","mt-4")},m(u,a){A(u,n,a),i(n,t),i(t,o),i(t,r),i(t,h),i(n,g),i(n,w),i(w,c)},p(u,a){a[0]&64&&s!==(s=Math.round(u[6].known/u[6].total*100)+"")&&R(r,s),a[0]&64&&se(c,"width",u[6].known/u[6].total*100+"%")},d(u){u&&I(n)}}}function Ue(e){let n,t,o,s=e[3]?`Signed in as ${e[3].name}`:"Signed in",r,h,g,w,c;return{c(){n=d("div"),t=d("div"),o=d("span"),r=D(s),h=x(),g=d("button"),g.textContent="Sign Out",l(o,"class","text-gray-600 dark:text-gray-300 text-sm"),l(g,"class","bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 text-sm"),l(t,"class","flex justify-center items-center gap-4"),l(n,"class","text-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-700")},m(u,a){A(u,n,a),i(n,t),i(t,o),i(o,r),i(t,h),i(t,g),w||(c=M(g,"click",e[13]),w=!0)},p(u,a){a[0]&8&&s!==(s=u[3]?`Signed in as ${u[3].name}`:"Signed in")&&R(r,s)},d(u){u&&I(n),w=!1,c()}}}function Et(e){let n,t,o,s,r,h,g;const w=[xt,yt],c=[];function u(a,f){return a[2]?1:0}return r=u(e),h=c[r]=w[r](e),{c(){n=d("main"),t=d("div"),o=d("header"),o.innerHTML='<h1 class="text-4xl font-bold text-gray-800 dark:text-white mb-2">mFlashcards</h1>',s=x(),h.c(),l(o,"class","text-center mb-8"),l(t,"class","max-w-4xl mx-auto"),l(n,"class","min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4")},m(a,f){A(a,n,f),i(n,t),i(t,o),i(t,s),c[r].m(t,null),g=!0},p(a,f){let p=r;r=u(a),r===p?c[r].p(a,f):(Ye(),he(c[p],1,1,()=>{c[p]=null}),Ke(),h=c[r],h?h.p(a,f):(h=c[r]=w[r](a),h.c()),ce(h,1),h.m(t,null))},i(a){g||(ce(h),g=!0)},o(a){he(h),g=!1},d(a){a&&I(n),c[r].d()}}}const It="https://sheets.googleapis.com/$discovery/rest?version=v4",Mt="https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/userinfo.profile";function At(){return new Promise(e=>{const n=()=>{typeof window.gapi<"u"&&typeof window.google<"u"?e():setTimeout(n,100)};n()})}async function Ft(){await new Promise(e=>{window.gapi.load("client",e)}),await window.gapi.client.init({discoveryDocs:[It]})}function xe(e){for(let n=e.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}}function Ot(e,n,t){let o,s,r=!1,h=null,g=null,w=null,c=null,u=[],a=0,f=!1,p={total:0,known:0,unknown:0},y=!1,v="word-to-definition",_=!1,C,P;nt(async()=>{if(typeof window<"u"){await At(),await Ft(),await N();const m=localStorage.getItem("google_access_token"),k=localStorage.getItem("google_token_expiration"),L=localStorage.getItem("user_profile");if(m&&k){const V=parseInt(k);if(Date.now()<V-5*60*1e3){if(h=m,w=V,window.gapi.client.setToken({access_token:h}),t(2,r=!0),L)try{t(3,g=JSON.parse(L))}catch(E){console.error("Error parsing saved profile:",E),await J()}else await J();z(),await q()}else console.log("Stored token has expired, clearing..."),T()}}});async function N(){C=google.accounts.oauth2.initTokenClient({client_id:"828760418951-ss53asiek3mm9djh818op49fgl4apj3m.apps.googleusercontent.com",scope:Mt,callback:async m=>{m.access_token&&(h=m.access_token,w=Date.now()+(m.expires_in?m.expires_in*1e3:3600*1e3),localStorage.setItem("google_access_token",h),localStorage.setItem("google_token_expiration",w.toString()),window.gapi.client.setToken({access_token:h}),t(2,r=!0),z(),await J(),await q())}})}function G(){C&&C.requestAccessToken()}async function J(){try{const m=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${h}`}});if(m.ok)t(3,g=await m.json()),localStorage.setItem("user_profile",JSON.stringify(g));else if(m.status===401||m.status===403){const k={status:m.status};await O(k)}}catch(m){console.error("Error fetching user profile:",m)}}function T(){P&&(clearInterval(P),P=null),localStorage.removeItem("google_access_token"),localStorage.removeItem("google_token_expiration"),localStorage.removeItem("user_profile"),t(2,r=!1),h=null,w=null,t(3,g=null),t(4,c=null),t(0,u=[]),Y()}function z(){P&&clearInterval(P),P=setInterval(()=>{r&&h&&X()},5*60*1e3)}function B(){h&&google.accounts.oauth2.revoke(h),T()}async function X(){if(!h||!w)return!1;const m=Date.now();if(w-m<5*60*1e3){console.log("Token expiring soon, requesting refresh...");try{if(C)return C.requestAccessToken({prompt:""}),!0}catch(L){return console.error("Failed to refresh token:",L),!1}}return!0}async function O(m){return console.error("Authentication error:",m),m.status===401||m.status===403?(console.log("Authentication failed, attempting to refresh token..."),await X()?!0:(console.log("Token refresh failed, signing out..."),T(),alert("Your session has expired. Please sign in again."),!1)):!1}async function q(){if(console.log("🔍 Checking for existing mFlashcards spreadsheet..."),!await X()){console.log("❌ Token invalid and refresh failed");return}try{if(!window.gapi||!window.gapi.client){console.log("❌ GAPI client not available");return}console.log("📋 Searching Google Drive...");const k=await window.gapi.client.request({path:"https://www.googleapis.com/drive/v3/files",params:{q:"name='mFlashcards' and mimeType='application/vnd.google-apps.spreadsheet' and trashed=false",fields:"files(id, name, createdTime)"}});if(console.log("🔍 Drive API response:",k),k.result.files&&k.result.files.length>0){const L=k.result.files[0];console.log("✅ Found existing mFlashcards file:",L),t(4,c=L.id),await j()}else console.log("❌ No existing mFlashcards file found in Google Drive"),console.log("💡 You can create one or select an existing spreadsheet")}catch(k){if(console.error("❌ Error checking for existing spreadsheet:",k),console.log("Response status:",k.status),console.log("Response body:",k.body),await O(k)){setTimeout(()=>q(),1e3);return}k.status===403&&console.log("🔐 Permission denied - make sure Drive API is enabled and scopes are correct")}}async function Q(m){t(4,c=m.detail.id),await j()}async function j(){if(!c)return;if(!await X()){console.log("❌ Token invalid and refresh failed");return}t(7,y=!0);try{const V=((await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:c})).result.sheets||[]).map(S=>S.properties.title);if(console.log("Available sheets:",V),!V.includes("mFlashcards"))throw new Error(`mFlashcards sheet not found. Available sheets: ${V.join(", ")}`);const E=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:c,range:"mFlashcards!A:B"})).result.values||[];if(console.log("Raw data from sheet:",E),E.length===0)throw new Error("mFlashcards sheet is empty");if(E.length===1)throw new Error("mFlashcards sheet only has headers. Add some flashcard data below the headers.");if(t(0,u=E.slice(1).map(([S,U])=>({word:S||"",definition:U||""})).filter(S=>S.word&&S.definition)),u.length===0)throw new Error("No valid flashcard pairs found. Make sure both Word and Definition columns have data.");xe(u),Y(),console.log("Loaded flashcards:",u)}catch(k){if(console.error("Error loading spreadsheet data:",k),await O(k)){setTimeout(()=>j(),1e3);return}let V="Error loading spreadsheet data: ";k.status===403?V+="Permission denied. Make sure the spreadsheet is accessible and you have edit permissions.":k.status===404?V+="Spreadsheet not found. Make sure you selected the correct file.":k.message?V+=k.message:V+="Unknown error occurred.",alert(V)}finally{t(7,y=!1)}}function Y(){xe(u),t(1,a=0),t(5,f=!1),t(6,p={total:0,known:0,unknown:0}),t(9,_=!1)}function W(){t(8,v=v==="word-to-definition"?"definition-to-word":"word-to-definition"),t(5,f=!1)}function b(){t(5,f=!1),t(1,a=a+1),a>=u.length&&t(9,_=!0)}function ee(){t(6,p.total++,p),t(6,p.known++,p),b()}function Z(){t(6,p.total++,p),t(6,p.unknown++,p),b()}function K(){xe(u),Y()}function ne(m){f=m,t(5,f)}const re=()=>t(4,c=null),$=()=>t(4,c=null),oe=()=>t(4,c=null);return e.$$.update=()=>{e.$$.dirty[0]&3&&t(11,o=u[a]),e.$$.dirty[0]&1&&t(10,s=u.length>0)},[u,a,r,g,c,f,p,y,v,_,s,o,G,B,Q,Y,W,b,ee,Z,K,ne,re,$,oe]}class jt extends Me{constructor(n){super(),Ie(this,n,Ot,Et,Pe,{},null,[-1,-1])}}new jt({target:document.getElementById("app")});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/mFlashcards/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})});
//# sourceMappingURL=index-Dn2bTFnx.js.map
