var Qe=Object.defineProperty;var Ze=(e,n,t)=>n in e?Qe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var _e=(e,n,t)=>Ze(e,typeof n!="symbol"?n+"":n,t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function G(){}function He(e){return e()}function Oe(){return Object.create(null)}function le(e){e.forEach(He)}function Ge(e){return typeof e=="function"}function Pe(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}function $e(e){return Object.keys(e).length===0}function i(e,n){e.appendChild(n)}function A(e,n,t){e.insertBefore(n,t||null)}function T(e){e.parentNode&&e.parentNode.removeChild(e)}function d(e){return document.createElement(e)}function D(e){return document.createTextNode(e)}function x(){return D(" ")}function Ue(){return D("")}function M(e,n,t,o){return e.addEventListener(n,t,o),()=>e.removeEventListener(n,t,o)}function l(e,n,t){t==null?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function et(e){return Array.from(e.childNodes)}function H(e,n){n=""+n,e.data!==n&&(e.data=n)}function se(e,n,t,o){t==null?e.style.removeProperty(n):e.style.setProperty(n,t,"")}function tt(e,n,{bubbles:t=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:n,bubbles:t,cancelable:o})}let we;function me(e){we=e}function Be(){if(!we)throw new Error("Function called outside component initialization");return we}function nt(e){Be().$$.on_mount.push(e)}function Xe(){const e=Be();return(n,t,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[n];if(r){const s=tt(n,t,{cancelable:o});return r.slice().forEach(p=>{p.call(e,s)}),!s.defaultPrevented}return!0}}const fe=[],ke=[];let ge=[];const Se=[],ot=Promise.resolve();let Ce=!1;function it(){Ce||(Ce=!0,ot.then(qe))}function De(e){ge.push(e)}function rt(e){Se.push(e)}const ye=new Set;let ce=0;function qe(){if(ce!==0)return;const e=we;do{try{for(;ce<fe.length;){const n=fe[ce];ce++,me(n),st(n.$$)}}catch(n){throw fe.length=0,ce=0,n}for(me(null),fe.length=0,ce=0;ke.length;)ke.pop()();for(let n=0;n<ge.length;n+=1){const t=ge[n];ye.has(t)||(ye.add(t),t())}ge.length=0}while(fe.length);for(;Se.length;)Se.pop()();Ce=!1,ye.clear(),me(e)}function st(e){if(e.fragment!==null){e.update(),le(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(De)}}function lt(e){const n=[],t=[];ge.forEach(o=>e.indexOf(o)===-1?n.push(o):t.push(o)),t.forEach(o=>o()),ge=n}const be=new Set;let de;function Ye(){de={r:0,c:[],p:de}}function Ke(){de.r||le(de.c),de=de.p}function ue(e,n){e&&e.i&&(be.delete(e),e.i(n))}function pe(e,n,t,o){if(e&&e.o){if(be.has(e))return;be.add(e),de.c.push(()=>{be.delete(e),o&&(t&&e.d(1),o())}),e.o(n)}else o&&o()}function at(e,n,t){const o=e.$$.props[n];o!==void 0&&(e.$$.bound[o]=t,t(e.$$.ctx[o]))}function Je(e){e&&e.c()}function Ee(e,n,t){const{fragment:o,after_update:r}=e.$$;o&&o.m(n,t),De(()=>{const s=e.$$.on_mount.map(He).filter(Ge);e.$$.on_destroy?e.$$.on_destroy.push(...s):le(s),e.$$.on_mount=[]}),r.forEach(De)}function Ie(e,n){const t=e.$$;t.fragment!==null&&(lt(t.after_update),le(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function dt(e,n){e.$$.dirty[0]===-1&&(fe.push(e),it(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function Te(e,n,t,o,r,s,p=null,g=[-1]){const w=we;me(e);const u=e.$$={fragment:null,ctx:[],props:s,update:G,not_equal:r,bound:Oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(w?w.$$.context:[])),callbacks:Oe(),dirty:g,skip_bound:!1,root:n.target||w.$$.root};p&&p(u.root);let c=!1;if(u.ctx=t?t(e,n.props||{},(a,f,...h)=>{const y=h.length?h[0]:f;return u.ctx&&r(u.ctx[a],u.ctx[a]=y)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](y),c&&dt(e,a)),f}):[],u.update(),c=!0,le(u.before_update),u.fragment=o?o(u.ctx):!1,n.target){if(n.hydrate){const a=et(n.target);u.fragment&&u.fragment.l(a),a.forEach(T)}else u.fragment&&u.fragment.c();n.intro&&ue(e.$$.fragment),Ee(e,n.target,n.anchor),qe()}me(w)}class Me{constructor(){_e(this,"$$");_e(this,"$$set")}$destroy(){Ie(this,1),this.$destroy=G}$on(n,t){if(!Ge(t))return G;const o=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return o.push(t),()=>{const r=o.indexOf(t);r!==-1&&o.splice(r,1)}}$set(n){this.$$set&&!$e(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const ut="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ut);function je(e){let n,t,o,r,s,p,g,w,u=e[8]?"Word":"Definition",c,a,f,h,y=(e[8]?e[1].word:e[1].definition)+"",v,_,C,P,N,U=e[8]?"definition":"word",J,E,z,B,X,O,q,Q=e[8]?"Definition":"Word",j,Y,W,b,ee=(e[8]?e[1].definition:e[1].word)+"",Z,K,ne,re,$,oe,m,k,L,V,F="speechSynthesis"in window&&(e[8]?e[1].word:e[1].definition)===e[1].word&&Le(e),I="speechSynthesis"in window&&(e[8]?e[1].definition:e[1].word)===e[1].word&&Ne(e);return{c(){n=d("div"),t=d("div"),o=d("div"),r=d("div"),s=d("div"),p=x(),g=d("div"),w=d("div"),c=D(u),a=x(),f=d("div"),h=d("div"),v=D(y),_=x(),F&&F.c(),C=x(),P=d("div"),N=D("Click to reveal "),J=D(U),E=x(),z=d("div"),B=d("div"),X=x(),O=d("div"),q=d("div"),j=D(Q),Y=x(),W=d("div"),b=d("div"),Z=D(ee),K=x(),I&&I.c(),re=x(),$=d("div"),oe=d("button"),oe.textContent="Hard",m=x(),k=d("button"),k.textContent="Easy",l(s,"class","absolute inset-0 rounded-xl transition-all duration-75 ease-out svelte-bpxev9"),se(s,"background-color",e[7]),se(s,"pointer-events","none"),l(w,"class","text-sm text-gray-500 dark:text-gray-400 mb-2"),l(h,"class","text-2xl md:text-3xl font-semibold text-gray-800 dark:text-white break-words"),l(f,"class","flex items-center justify-center gap-3 mb-6"),l(P,"class","text-sm text-gray-500 dark:text-gray-400"),l(g,"class","text-center relative z-10 svelte-bpxev9"),l(r,"class","flashcard-face flashcard-front bg-white dark:bg-gray-800 shadow-xl rounded-xl p-8 min-h-[300px] flex items-center justify-center relative svelte-bpxev9"),l(B,"class","absolute inset-0 rounded-xl transition-all duration-75 ease-out svelte-bpxev9"),se(B,"background-color",e[7]),se(B,"pointer-events","none"),l(q,"class","text-sm text-gray-600 dark:text-gray-300 mb-2"),l(b,"class","text-2xl md:text-3xl font-semibold text-blue-800 dark:text-blue-200 break-words"),l(W,"class","flex items-center justify-center gap-3"),l(O,"class","text-center relative z-20 svelte-bpxev9"),l(z,"class","flashcard-face flashcard-back bg-blue-50 dark:bg-blue-900 shadow-xl rounded-xl p-8 min-h-[300px] flex items-center justify-center relative svelte-bpxev9"),l(o,"class",ne="flashcard-container cursor-pointer transform-style-preserve-3d "+(e[6]?"transition-all duration-200":"")+" "+(e[0]?"rotate-y-180":"")+" svelte-bpxev9"),se(o,"transform","translateX("+e[2]+"px) "+(e[0]?"rotateY(180deg)":"")),se(o,"opacity",e[5]),l(o,"role","button"),l(o,"tabindex","0"),l(t,"class","relative perspective-1000 mb-8 svelte-bpxev9"),l(oe,"class","bg-red-500 hover:bg-red-600 text-white font-medium px-8 py-3 rounded-lg transition-colors duration-200"),l(k,"class","bg-green-500 hover:bg-green-600 text-white font-medium px-8 py-3 rounded-lg transition-colors duration-200"),l($,"class","flex gap-6 justify-center mt-6"),l(n,"class","max-w-2xl mx-auto")},m(S,R){A(S,n,R),i(n,t),i(t,o),i(o,r),i(r,s),i(r,p),i(r,g),i(g,w),i(w,c),i(g,a),i(g,f),i(f,h),i(h,v),i(f,_),F&&F.m(f,null),i(g,C),i(g,P),i(P,N),i(P,J),i(o,E),i(o,z),i(z,B),i(z,X),i(z,O),i(O,q),i(q,j),i(O,Y),i(O,W),i(W,b),i(b,Z),i(W,K),I&&I.m(W,null),e[21](o),i(n,re),i(n,$),i($,oe),i($,m),i($,k),L||(V=[M(o,"click",e[22]),M(o,"keydown",e[23]),M(o,"mousedown",e[12]),M(o,"mousemove",e[13]),M(o,"mouseup",e[14]),M(o,"mouseleave",e[14]),M(o,"touchstart",e[12]),M(o,"touchmove",e[13]),M(o,"touchend",e[14]),M(oe,"click",e[11]),M(k,"click",e[10])],L=!0)},p(S,R){R&128&&se(s,"background-color",S[7]),R&256&&u!==(u=S[8]?"Word":"Definition")&&H(c,u),R&258&&y!==(y=(S[8]?S[1].word:S[1].definition)+"")&&H(v,y),"speechSynthesis"in window&&(S[8]?S[1].word:S[1].definition)===S[1].word?F?F.p(S,R):(F=Le(S),F.c(),F.m(f,null)):F&&(F.d(1),F=null),R&256&&U!==(U=S[8]?"definition":"word")&&H(J,U),R&128&&se(B,"background-color",S[7]),R&256&&Q!==(Q=S[8]?"Definition":"Word")&&H(j,Q),R&258&&ee!==(ee=(S[8]?S[1].definition:S[1].word)+"")&&H(Z,ee),"speechSynthesis"in window&&(S[8]?S[1].definition:S[1].word)===S[1].word?I?I.p(S,R):(I=Ne(S),I.c(),I.m(W,null)):I&&(I.d(1),I=null),R&65&&ne!==(ne="flashcard-container cursor-pointer transform-style-preserve-3d "+(S[6]?"transition-all duration-200":"")+" "+(S[0]?"rotate-y-180":"")+" svelte-bpxev9")&&l(o,"class",ne),R&5&&se(o,"transform","translateX("+S[2]+"px) "+(S[0]?"rotateY(180deg)":"")),R&32&&se(o,"opacity",S[5])},d(S){S&&T(n),F&&F.d(),I&&I.d(),e[21](null),L=!1,le(V)}}}function Le(e){let n,t,o;return{c(){n=d("button"),n.innerHTML='<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>',l(n,"class","flex-shrink-0 p-2 rounded-full bg-blue-100 hover:bg-blue-200 dark:bg-blue-800 dark:hover:bg-blue-700 transition-colors duration-200 text-blue-600 dark:text-blue-300 relative z-50"),l(n,"title","Play pronunciation")},m(r,s){A(r,n,s),t||(o=M(n,"click",e[19]),t=!0)},p:G,d(r){r&&T(n),t=!1,o()}}}function Ne(e){let n,t,o;return{c(){n=d("button"),n.innerHTML='<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>',l(n,"class","flex-shrink-0 p-2 rounded-full bg-blue-200 hover:bg-blue-300 dark:bg-blue-700 dark:hover:bg-blue-600 transition-colors duration-200 text-blue-700 dark:text-blue-200 relative z-50"),l(n,"title","Play pronunciation")},m(r,s){A(r,n,s),t||(o=M(n,"click",e[20]),t=!0)},p:G,d(r){r&&T(n),t=!1,o()}}}function ct(e){let n,t=e[1]&&je(e);return{c(){t&&t.c(),n=Ue()},m(o,r){t&&t.m(o,r),A(o,n,r)},p(o,[r]){o[1]?t?t.p(o,r):(t=je(o),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},i:G,o:G,d(o){o&&T(n),t&&t.d(o)}}}function We(e){if("speechSynthesis"in window){window.speechSynthesis.cancel();const n=new SpeechSynthesisUtterance(e);n.rate=.8,n.volume=.7;const o=window.speechSynthesis.getVoices().find(r=>r.lang.startsWith("en"));o&&(n.voice=o),window.speechSynthesis.speak(n)}}function ft(e,n,t){let o,r,s,p;const g=Xe();let{currentCard:w}=n,{studyMode:u="word-to-definition"}=n,{showDefinition:c=!1}=n,a,f=!1,h=0,y=0,v=0,_=!1,C=1,P=!0,N=!1;function U(){t(0,c=!c)}function J(){g("known")}function E(){g("unknown")}function z(b){_||(t(16,f=!0),N=!1,h=b.type==="mousedown"?b.clientX:b.touches[0].clientX,y=h,t(2,v=0))}function B(b){!f||_||(b.preventDefault(),y=b.type==="mousemove"?b.clientX:b.touches[0].clientX,t(2,v=y-h),Math.abs(v)>5&&(N=!0),t(2,v=Math.max(-200,Math.min(200,v))))}function X(b){if(!f||_)return;t(16,f=!1);const ee=80;v>ee?(b&&b.preventDefault(),t(3,_=!0),O(()=>J())):v<-ee?(b&&b.preventDefault(),t(3,_=!0),O(()=>E())):N?(b&&b.preventDefault(),t(3,_=!0),t(2,v=0),setTimeout(()=>{t(3,_=!1)},200)):t(3,_=!1)}function O(b){t(2,v=v>0?400:-400),setTimeout(()=>{b(),t(6,P=!1),t(5,C=0),t(2,v=0),setTimeout(()=>{t(6,P=!0),t(5,C=1),t(3,_=!1),N=!1},100)},200)}const q=b=>{b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),We(w.word)},Q=b=>{b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),We(w.word)};function j(b){ke[b?"unshift":"push"](()=>{a=b,t(4,a)})}const Y=b=>{_||U()},W=b=>b.key===" "&&U();return e.$$set=b=>{"currentCard"in b&&t(1,w=b.currentCard),"studyMode"in b&&t(15,u=b.studyMode),"showDefinition"in b&&t(0,c=b.showDefinition)},e.$$.update=()=>{e.$$.dirty&10&&w&&!_&&t(0,c=!1),e.$$.dirty&32768&&t(8,o=u==="word-to-definition"),e.$$.dirty&4&&t(17,r=Math.min(Math.abs(v)/150,.3)),e.$$.dirty&4&&t(18,s=v>0?"right":"left"),e.$$.dirty&458756&&t(7,p=f&&Math.abs(v)>20?s==="right"?`rgba(34, 197, 94, ${r})`:`rgba(239, 68, 68, ${r})`:"transparent")},[c,w,v,_,a,C,P,p,o,U,J,E,z,B,X,u,f,r,s,q,Q,j,Y,W]}class gt extends Me{constructor(n){super(),Te(this,n,ft,ct,Pe,{currentCard:1,studyMode:15,showDefinition:0})}}function pt(e){let n;return{c(){n=D("📁 Browse Google Drive")},m(t,o){A(t,n,o)},d(t){t&&T(n)}}}function ht(e){let n;return{c(){n=D("Picker Failed to Load")},m(t,o){A(t,n,o)},d(t){t&&T(n)}}}function mt(e){let n;return{c(){n=D("Loading Picker...")},m(t,o){A(t,n,o)},d(t){t&&T(n)}}}function wt(e){let n,t,o,r,s,p,g,w,u,c,a,f;function h(_,C){return _[1]?mt:_[0]?pt:ht}let y=h(e),v=y(e);return{c(){n=d("div"),t=d("div"),o=d("h2"),o.textContent="📊 Select Spreadsheet",r=x(),s=d("p"),s.textContent="Choose a Google Sheets document containing your flashcard data.",p=x(),g=d("p"),g.textContent=`Make sure your spreadsheet has a "mFlashcards" sheet with "Word" and "Definition" columns,
      and optionally a "StatsData" sheet for saving progress.`,w=x(),u=d("button"),v.c(),l(o,"class","text-2xl font-semibold mb-4 text-gray-800 dark:text-white"),l(s,"class","text-gray-600 dark:text-gray-300 mb-6"),l(g,"class","text-sm text-gray-500 dark:text-gray-400 mb-6"),u.disabled=c=!e[0]||e[1],l(u,"class","bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200"),l(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md mx-auto"),l(n,"class","text-center")},m(_,C){A(_,n,C),i(n,t),i(t,o),i(t,r),i(t,s),i(t,p),i(t,g),i(t,w),i(t,u),v.m(u,null),a||(f=M(u,"click",e[2]),a=!0)},p(_,[C]){y!==(y=h(_))&&(v.d(1),v=y(_),v&&(v.c(),v.m(u,null))),C&3&&c!==(c=!_[0]||_[1])&&(u.disabled=c)},i:G,o:G,d(_){_&&T(n),v.d(),a=!1,f()}}}function bt(){return new Promise(e=>{const n=()=>{typeof window.gapi<"u"&&typeof window.google<"u"?e():setTimeout(n,100)};n()})}function kt(){var e;return(e=window.gapi.client.getToken())==null?void 0:e.access_token}function vt(e,n,t){const o=Xe();let r=!1,s=!0;async function p(){try{await bt(),await g()}catch(c){console.error("Failed to initialize picker:",c)}finally{t(1,s=!1)}}function g(){return new Promise((c,a)=>{window.gapi.load("picker",{callback:()=>{t(0,r=!0),c()},onerror:a})})}function w(){if(r&&window.gapi.client.getToken()){const c=kt(),a=localStorage.getItem("google_token_expiration");if(a){const y=parseInt(a);if(Date.now()>=y-5*60*1e3){alert("Your session has expired. Please refresh the page and sign in again.");return}}const f=new google.picker.View(google.picker.ViewId.SPREADSHEETS);f.setMimeTypes("application/vnd.google-apps.spreadsheet"),new google.picker.PickerBuilder().enableFeature(google.picker.Feature.SUPPORT_DRIVES).setOAuthToken(c).addView(f).setCallback(u).build().setVisible(!0)}else alert("Authentication required. Please refresh the page and sign in again.")}function u(c){if(c.action===google.picker.Action.PICKED){const a=c.docs[0].id,f=c.docs[0].name;o("selected",{id:a,name:f})}}return typeof window<"u"&&p(),[r,s,w]}class _t extends Me{constructor(n){super(),Te(this,n,vt,wt,Pe,{})}}function yt(e){let n,t,o,r,s,p,g=e[6].total>0&&ze(e);const w=[Et,Pt,Dt,Ct,St],u=[];function c(f,h){return f[4]?f[7]?1:f[10]&&!f[9]?2:f[9]?3:4:0}t=c(e),o=u[t]=w[t](e);let a=(!e[10]||e[7])&&Re(e);return{c(){g&&g.c(),n=x(),o.c(),r=x(),a&&a.c(),s=Ue()},m(f,h){g&&g.m(f,h),A(f,n,h),u[t].m(f,h),A(f,r,h),a&&a.m(f,h),A(f,s,h),p=!0},p(f,h){f[6].total>0?g?g.p(f,h):(g=ze(f),g.c(),g.m(n.parentNode,n)):g&&(g.d(1),g=null);let y=t;t=c(f),t===y?u[t].p(f,h):(Ye(),pe(u[y],1,1,()=>{u[y]=null}),Ke(),o=u[t],o?o.p(f,h):(o=u[t]=w[t](f),o.c()),ue(o,1),o.m(r.parentNode,r)),!f[10]||f[7]?a?a.p(f,h):(a=Re(f),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},i(f){p||(ue(o),p=!0)},o(f){pe(o),p=!1},d(f){f&&(T(n),T(r),T(s)),g&&g.d(f),u[t].d(f),a&&a.d(f)}}}function xt(e){let n,t,o,r,s,p,g,w,u;return{c(){n=d("div"),t=d("div"),o=d("h2"),o.textContent="Welcome!",r=x(),s=d("p"),s.textContent="Sign in with your Google account to access your flashcard spreadsheets.",p=x(),g=d("button"),g.textContent="Sign in with Google",l(o,"class","text-2xl font-semibold mb-4 text-gray-800 dark:text-white"),l(s,"class","text-gray-600 dark:text-gray-300 mb-6"),l(g,"class","bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200"),l(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md mx-auto"),l(n,"class","text-center")},m(c,a){A(c,n,a),i(n,t),i(t,o),i(t,r),i(t,s),i(t,p),i(t,g),w||(u=M(g,"click",e[12]),w=!0)},p:G,i:G,o:G,d(c){c&&T(n),w=!1,u()}}}function ze(e){let n,t,o,r=e[6].known+"",s,p,g=e[6].unknown+"",w,u,c=e[6].total+"",a,f,h,y,v;return{c(){n=d("div"),t=d("div"),o=d("span"),s=D(r),p=D(" ✅ "),w=D(g),u=D(" ❌ / "),a=D(c),f=x(),h=d("button"),h.textContent="Reset Deck",l(o,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),l(h,"class","ml-4 bg-orange-500 hover:bg-orange-600 text-white px-3 py-1 rounded text-sm transition-colors duration-200"),l(t,"class","bg-white dark:bg-gray-800 px-4 py-2 rounded-lg shadow"),l(n,"class","flex justify-center mb-6")},m(_,C){A(_,n,C),i(n,t),i(t,o),i(o,s),i(o,p),i(o,w),i(o,u),i(o,a),i(t,f),i(t,h),y||(v=M(h,"click",e[15]),y=!0)},p(_,C){C[0]&64&&r!==(r=_[6].known+"")&&H(s,r),C[0]&64&&g!==(g=_[6].unknown+"")&&H(w,g),C[0]&64&&c!==(c=_[6].total+"")&&H(a,c)},d(_){_&&T(n),y=!1,v()}}}function St(e){let n,t,o,r,s,p,g,w,u,c,a,f=e[3]?`Signed in as ${e[3].name}`:"Signed in",h,y,v,_,C;return{c(){n=d("div"),t=d("div"),o=d("h3"),o.textContent="No flashcards found",r=x(),s=d("p"),s.textContent='Make sure your spreadsheet has a "mFlashcards" sheet with "Word" and "Definition" columns.',p=x(),g=d("button"),g.textContent="Choose Different Spreadsheet",w=x(),u=d("div"),c=d("div"),a=d("span"),h=D(f),y=x(),v=d("button"),v.textContent="Sign Out",l(o,"class","text-xl font-semibold mb-4 text-gray-800 dark:text-white"),l(s,"class","text-gray-600 dark:text-gray-300 mb-4"),l(g,"class","bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200"),l(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"),l(a,"class","text-gray-600 dark:text-gray-300 text-sm"),l(v,"class","bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 text-sm"),l(c,"class","flex justify-center items-center gap-4"),l(u,"class","text-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-700"),l(n,"class","text-center")},m(P,N){A(P,n,N),i(n,t),i(t,o),i(t,r),i(t,s),i(t,p),i(t,g),i(n,w),i(n,u),i(u,c),i(c,a),i(a,h),i(c,y),i(c,v),_||(C=[M(g,"click",e[24]),M(v,"click",e[13])],_=!0)},p(P,N){N[0]&8&&f!==(f=P[3]?`Signed in as ${P[3].name}`:"Signed in")&&H(h,f)},i:G,o:G,d(P){P&&T(n),_=!1,le(C)}}}function Ct(e){let n,t,o,r,s,p,g=e[0].length+"",w,u,c,a,f,h,y,v,_,C=e[6].total+"",P,N,U,J,E,z,B=e[6].known+"",X,O,q,Q,j,Y,W=e[6].unknown+"",b,ee,Z,K,ne,re,$,oe,m,k,L,V,F,I,S=e[3]?`Signed in as ${e[3].name}`:"Signed in",R,Ae,he,ve,Fe,te=e[6].total>0&&Ve(e);return{c(){n=d("div"),t=d("div"),o=d("h2"),o.textContent="🎉 Deck Complete!",r=x(),s=d("p"),p=D("You've finished all "),w=D(g),u=D(" cards in this deck."),c=x(),a=d("div"),f=d("h3"),f.textContent="Session Stats",h=x(),y=d("div"),v=d("div"),_=d("div"),P=D(C),N=x(),U=d("div"),U.textContent="Total",J=x(),E=d("div"),z=d("div"),X=D(B),O=x(),q=d("div"),q.textContent="Known",Q=x(),j=d("div"),Y=d("div"),b=D(W),ee=x(),Z=d("div"),Z.textContent="Unknown",K=x(),te&&te.c(),ne=x(),re=d("div"),$=d("button"),$.textContent="🔄 Study Again",oe=x(),m=d("div"),k=d("button"),k.textContent="Choose Different Spreadsheet",L=x(),V=d("div"),F=d("div"),I=d("span"),R=D(S),Ae=x(),he=d("button"),he.textContent="Sign Out",l(o,"class","text-3xl font-bold mb-4 text-gray-800 dark:text-white"),l(s,"class","text-gray-600 dark:text-gray-300 mb-6"),l(f,"class","text-lg font-semibold mb-4 text-gray-800 dark:text-white"),l(_,"class","text-2xl font-bold text-blue-600 dark:text-blue-400"),l(U,"class","text-sm text-gray-600 dark:text-gray-300"),l(z,"class","text-2xl font-bold text-green-600 dark:text-green-400"),l(q,"class","text-sm text-gray-600 dark:text-gray-300"),l(Y,"class","text-2xl font-bold text-red-600 dark:text-red-400"),l(Z,"class","text-sm text-gray-600 dark:text-gray-300"),l(y,"class","grid grid-cols-3 gap-4 text-center"),l(a,"class","bg-gray-50 dark:bg-gray-700 rounded-lg p-6 mb-6"),l($,"class","bg-blue-500 hover:bg-blue-600 text-white font-medium px-6 py-3 rounded-lg transition-colors duration-200"),l(re,"class","flex justify-center"),l(k,"class","text-blue-500 hover:text-blue-600 underline"),l(m,"class","mt-6"),l(t,"class","bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md mx-auto"),l(I,"class","text-gray-600 dark:text-gray-300 text-sm"),l(he,"class","bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 text-sm"),l(F,"class","flex justify-center items-center gap-4"),l(V,"class","text-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-700"),l(n,"class","text-center")},m(ie,ae){A(ie,n,ae),i(n,t),i(t,o),i(t,r),i(t,s),i(s,p),i(s,w),i(s,u),i(t,c),i(t,a),i(a,f),i(a,h),i(a,y),i(y,v),i(v,_),i(_,P),i(v,N),i(v,U),i(y,J),i(y,E),i(E,z),i(z,X),i(E,O),i(E,q),i(y,Q),i(y,j),i(j,Y),i(Y,b),i(j,ee),i(j,Z),i(a,K),te&&te.m(a,null),i(t,ne),i(t,re),i(re,$),i(t,oe),i(t,m),i(m,k),i(n,L),i(n,V),i(V,F),i(F,I),i(I,R),i(F,Ae),i(F,he),ve||(Fe=[M($,"click",e[20]),M(k,"click",e[23]),M(he,"click",e[13])],ve=!0)},p(ie,ae){ae[0]&1&&g!==(g=ie[0].length+"")&&H(w,g),ae[0]&64&&C!==(C=ie[6].total+"")&&H(P,C),ae[0]&64&&B!==(B=ie[6].known+"")&&H(X,B),ae[0]&64&&W!==(W=ie[6].unknown+"")&&H(b,W),ie[6].total>0?te?te.p(ie,ae):(te=Ve(ie),te.c(),te.m(a,null)):te&&(te.d(1),te=null),ae[0]&8&&S!==(S=ie[3]?`Signed in as ${ie[3].name}`:"Signed in")&&H(R,S)},i:G,o:G,d(ie){ie&&T(n),te&&te.d(),ve=!1,le(Fe)}}}function Dt(e){let n,t,o,r=e[1]+1+"",s,p,g=e[0].length+"",w,u,c,a,f,h,y,v,_,C,P,N=e[8]==="word-to-definition"?"Word → Definition":"Definition → Word",U,J,E,z,B,X,O,q,Q,j,Y,W=e[3]?`Signed in as ${e[3].name}`:"Signed in",b,ee,Z,K,ne,re;function $(m){e[21](m)}let oe={currentCard:e[11],studyMode:e[8]};return e[5]!==void 0&&(oe.showDefinition=e[5]),E=new gt({props:oe}),ke.push(()=>at(E,"showDefinition",$)),E.$on("known",e[18]),E.$on("unknown",e[19]),E.$on("next",e[17]),{c(){n=d("div"),t=d("span"),o=D("Card "),s=D(r),p=D(" of "),w=D(g),u=x(),c=d("div"),a=d("span"),a.textContent="Study Mode:",f=x(),h=d("button"),y=d("span"),C=x(),P=d("span"),U=D(N),J=x(),Je(E.$$.fragment),B=x(),X=d("div"),O=d("button"),O.textContent="Choose Different Spreadsheet",q=x(),Q=d("div"),j=d("div"),Y=d("span"),b=D(W),ee=x(),Z=d("button"),Z.textContent="Sign Out",l(t,"class","text-gray-600 dark:text-gray-300"),l(a,"class","text-sm text-gray-600 dark:text-gray-300 hidden sm:inline"),l(y,"class",v="inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 "+(e[8]==="word-to-definition"?"translate-x-6":"translate-x-1")),l(h,"class",_="relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 "+(e[8]==="word-to-definition"?"bg-blue-500":"bg-gray-400")),l(P,"class","text-sm text-gray-600 dark:text-gray-300 min-w-0"),l(c,"class","flex items-center gap-3"),l(n,"class","flex justify-between items-center mb-4"),l(O,"class","text-blue-500 hover:text-blue-600 underline"),l(X,"class","text-center mt-6"),l(Y,"class","text-gray-600 dark:text-gray-300 text-sm"),l(Z,"class","bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 text-sm"),l(j,"class","flex justify-center items-center gap-4"),l(Q,"class","text-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-700")},m(m,k){A(m,n,k),i(n,t),i(t,o),i(t,s),i(t,p),i(t,w),i(n,u),i(n,c),i(c,a),i(c,f),i(c,h),i(h,y),i(c,C),i(c,P),i(P,U),A(m,J,k),Ee(E,m,k),A(m,B,k),A(m,X,k),i(X,O),A(m,q,k),A(m,Q,k),i(Q,j),i(j,Y),i(Y,b),i(j,ee),i(j,Z),K=!0,ne||(re=[M(h,"click",e[16]),M(O,"click",e[22]),M(Z,"click",e[13])],ne=!0)},p(m,k){(!K||k[0]&2)&&r!==(r=m[1]+1+"")&&H(s,r),(!K||k[0]&1)&&g!==(g=m[0].length+"")&&H(w,g),(!K||k[0]&256&&v!==(v="inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 "+(m[8]==="word-to-definition"?"translate-x-6":"translate-x-1")))&&l(y,"class",v),(!K||k[0]&256&&_!==(_="relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 "+(m[8]==="word-to-definition"?"bg-blue-500":"bg-gray-400")))&&l(h,"class",_),(!K||k[0]&256)&&N!==(N=m[8]==="word-to-definition"?"Word → Definition":"Definition → Word")&&H(U,N);const L={};k[0]&2048&&(L.currentCard=m[11]),k[0]&256&&(L.studyMode=m[8]),!z&&k[0]&32&&(z=!0,L.showDefinition=m[5],rt(()=>z=!1)),E.$set(L),(!K||k[0]&8)&&W!==(W=m[3]?`Signed in as ${m[3].name}`:"Signed in")&&H(b,W)},i(m){K||(ue(E.$$.fragment,m),K=!0)},o(m){pe(E.$$.fragment,m),K=!1},d(m){m&&(T(n),T(J),T(B),T(X),T(q),T(Q)),Ie(E,m),ne=!1,le(re)}}}function Pt(e){let n;return{c(){n=d("div"),n.innerHTML='<div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div> <p class="text-gray-600 dark:text-gray-300">Loading flashcards...</p></div>',l(n,"class","text-center")},m(t,o){A(t,n,o)},p:G,i:G,o:G,d(t){t&&T(n)}}}function Et(e){let n,t;return n=new _t({}),n.$on("selected",e[14]),{c(){Je(n.$$.fragment)},m(o,r){Ee(n,o,r),t=!0},p:G,i(o){t||(ue(n.$$.fragment,o),t=!0)},o(o){pe(n.$$.fragment,o),t=!1},d(o){Ie(n,o)}}}function Ve(e){let n,t,o,r=Math.round(e[6].known/e[6].total*100)+"",s,p,g,w,u;return{c(){n=d("div"),t=d("div"),o=D("Accuracy: "),s=D(r),p=D("%"),g=x(),w=d("div"),u=d("div"),l(t,"class","text-sm text-gray-600 dark:text-gray-300 mb-2"),l(u,"class","bg-green-500 h-2 rounded-full transition-all duration-300"),se(u,"width",e[6].known/e[6].total*100+"%"),l(w,"class","w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2"),l(n,"class","mt-4")},m(c,a){A(c,n,a),i(n,t),i(t,o),i(t,s),i(t,p),i(n,g),i(n,w),i(w,u)},p(c,a){a[0]&64&&r!==(r=Math.round(c[6].known/c[6].total*100)+"")&&H(s,r),a[0]&64&&se(u,"width",c[6].known/c[6].total*100+"%")},d(c){c&&T(n)}}}function Re(e){let n,t,o,r=e[3]?`Signed in as ${e[3].name}`:"Signed in",s,p,g,w,u;return{c(){n=d("div"),t=d("div"),o=d("span"),s=D(r),p=x(),g=d("button"),g.textContent="Sign Out",l(o,"class","text-gray-600 dark:text-gray-300 text-sm"),l(g,"class","bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 text-sm"),l(t,"class","flex justify-center items-center gap-4"),l(n,"class","text-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-700")},m(c,a){A(c,n,a),i(n,t),i(t,o),i(o,s),i(t,p),i(t,g),w||(u=M(g,"click",e[13]),w=!0)},p(c,a){a[0]&8&&r!==(r=c[3]?`Signed in as ${c[3].name}`:"Signed in")&&H(s,r)},d(c){c&&T(n),w=!1,u()}}}function It(e){let n,t,o,r,s,p,g;const w=[xt,yt],u=[];function c(a,f){return a[2]?1:0}return s=c(e),p=u[s]=w[s](e),{c(){n=d("main"),t=d("div"),o=d("header"),o.innerHTML='<h1 class="text-4xl font-bold text-gray-800 dark:text-white mb-2">mFlashcards</h1>',r=x(),p.c(),l(o,"class","text-center mb-8"),l(t,"class","max-w-4xl mx-auto"),l(n,"class","min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4")},m(a,f){A(a,n,f),i(n,t),i(t,o),i(t,r),u[s].m(t,null),g=!0},p(a,f){let h=s;s=c(a),s===h?u[s].p(a,f):(Ye(),pe(u[h],1,1,()=>{u[h]=null}),Ke(),p=u[s],p?p.p(a,f):(p=u[s]=w[s](a),p.c()),ue(p,1),p.m(t,null))},i(a){g||(ue(p),g=!0)},o(a){pe(p),g=!1},d(a){a&&T(n),u[s].d()}}}const Tt="https://sheets.googleapis.com/$discovery/rest?version=v4",Mt="https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/userinfo.profile";function At(){return new Promise(e=>{const n=()=>{typeof window.gapi<"u"&&typeof window.google<"u"?e():setTimeout(n,100)};n()})}async function Ft(){await new Promise(e=>{window.gapi.load("client",e)}),await window.gapi.client.init({discoveryDocs:[Tt]})}function xe(e){for(let n=e.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}}function Ot(e,n,t){let o,r,s=!1,p=null,g=null,w=null,u=null,c=[],a=0,f=!1,h={total:0,known:0,unknown:0},y=!1,v="word-to-definition",_=!1,C,P;nt(async()=>{if(typeof window<"u"){await At(),await Ft(),await N();const m=localStorage.getItem("google_access_token"),k=localStorage.getItem("google_token_expiration"),L=localStorage.getItem("user_profile");if(m&&k){const V=parseInt(k);if(Date.now()<V-5*60*1e3){if(p=m,w=V,window.gapi.client.setToken({access_token:p}),t(2,s=!0),L)try{t(3,g=JSON.parse(L))}catch(I){console.error("Error parsing saved profile:",I),await J()}else await J();z(),await q()}else console.log("Stored token has expired, clearing..."),E()}}});async function N(){C=google.accounts.oauth2.initTokenClient({client_id:"828760418951-ss53asiek3mm9djh818op49fgl4apj3m.apps.googleusercontent.com",scope:Mt,callback:async m=>{m.access_token&&(p=m.access_token,w=Date.now()+(m.expires_in?m.expires_in*1e3:3600*1e3),localStorage.setItem("google_access_token",p),localStorage.setItem("google_token_expiration",w.toString()),window.gapi.client.setToken({access_token:p}),t(2,s=!0),z(),await J(),await q())}})}function U(){C&&C.requestAccessToken()}async function J(){try{const m=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${p}`}});if(m.ok)t(3,g=await m.json()),localStorage.setItem("user_profile",JSON.stringify(g));else if(m.status===401||m.status===403){const k={status:m.status};await O(k)}}catch(m){console.error("Error fetching user profile:",m)}}function E(){P&&(clearInterval(P),P=null),localStorage.removeItem("google_access_token"),localStorage.removeItem("google_token_expiration"),localStorage.removeItem("user_profile"),t(2,s=!1),p=null,w=null,t(3,g=null),t(4,u=null),t(0,c=[]),Y()}function z(){P&&clearInterval(P),P=setInterval(()=>{s&&p&&X()},5*60*1e3)}function B(){p&&google.accounts.oauth2.revoke(p),E()}async function X(){if(!p||!w)return!1;const m=Date.now();if(w-m<5*60*1e3){console.log("Token expiring soon, requesting refresh...");try{if(C)return C.requestAccessToken({prompt:""}),!0}catch(L){return console.error("Failed to refresh token:",L),!1}}return!0}async function O(m){return console.error("Authentication error:",m),m.status===401||m.status===403?(console.log("Authentication failed, attempting to refresh token..."),await X()?!0:(console.log("Token refresh failed, signing out..."),E(),alert("Your session has expired. Please sign in again."),!1)):!1}async function q(){if(console.log("🔍 Checking for existing mFlashcards spreadsheet..."),!await X()){console.log("❌ Token invalid and refresh failed");return}try{if(!window.gapi||!window.gapi.client){console.log("❌ GAPI client not available");return}console.log("📋 Searching Google Drive...");const k=await window.gapi.client.request({path:"https://www.googleapis.com/drive/v3/files",params:{q:"name='mFlashcards' and mimeType='application/vnd.google-apps.spreadsheet' and trashed=false",fields:"files(id, name, createdTime)"}});if(console.log("🔍 Drive API response:",k),k.result.files&&k.result.files.length>0){const L=k.result.files[0];console.log("✅ Found existing mFlashcards file:",L),t(4,u=L.id),await j()}else console.log("❌ No existing mFlashcards file found in Google Drive"),console.log("💡 You can create one or select an existing spreadsheet")}catch(k){if(console.error("❌ Error checking for existing spreadsheet:",k),console.log("Response status:",k.status),console.log("Response body:",k.body),await O(k)){setTimeout(()=>q(),1e3);return}k.status===403&&console.log("🔐 Permission denied - make sure Drive API is enabled and scopes are correct")}}async function Q(m){t(4,u=m.detail.id),await j()}async function j(){if(!u)return;if(!await X()){console.log("❌ Token invalid and refresh failed");return}t(7,y=!0);try{const V=((await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:u})).result.sheets||[]).map(S=>S.properties.title);if(console.log("Available sheets:",V),!V.includes("mFlashcards"))throw new Error(`mFlashcards sheet not found. Available sheets: ${V.join(", ")}`);const I=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:u,range:"mFlashcards!A:B"})).result.values||[];if(console.log("Raw data from sheet:",I),I.length===0)throw new Error("mFlashcards sheet is empty");if(I.length===1)throw new Error("mFlashcards sheet only has headers. Add some flashcard data below the headers.");if(t(0,c=I.slice(1).map(([S,R])=>({word:S||"",definition:R||""})).filter(S=>S.word&&S.definition)),c.length===0)throw new Error("No valid flashcard pairs found. Make sure both Word and Definition columns have data.");xe(c),Y(),console.log("Loaded flashcards:",c)}catch(k){if(console.error("Error loading spreadsheet data:",k),await O(k)){setTimeout(()=>j(),1e3);return}let V="Error loading spreadsheet data: ";k.status===403?V+="Permission denied. Make sure the spreadsheet is accessible and you have edit permissions.":k.status===404?V+="Spreadsheet not found. Make sure you selected the correct file.":k.message?V+=k.message:V+="Unknown error occurred.",alert(V)}finally{t(7,y=!1)}}function Y(){xe(c),t(1,a=0),t(5,f=!1),t(6,h={total:0,known:0,unknown:0}),t(9,_=!1)}function W(){t(8,v=v==="word-to-definition"?"definition-to-word":"word-to-definition"),t(5,f=!1)}function b(){t(5,f=!1),t(1,a=a+1),a>=c.length&&t(9,_=!0)}function ee(){t(6,h.total++,h),t(6,h.known++,h),b()}function Z(){t(6,h.total++,h),t(6,h.unknown++,h),b()}function K(){xe(c),Y()}function ne(m){f=m,t(5,f)}const re=()=>t(4,u=null),$=()=>t(4,u=null),oe=()=>t(4,u=null);return e.$$.update=()=>{e.$$.dirty[0]&3&&t(11,o=c[a]),e.$$.dirty[0]&1&&t(10,r=c.length>0)},[c,a,s,g,u,f,h,y,v,_,r,o,U,B,Q,Y,W,b,ee,Z,K,ne,re,$,oe]}class jt extends Me{constructor(n){super(),Te(this,n,Ot,It,Pe,{},null,[-1,-1])}}new jt({target:document.getElementById("app")});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/mFlashcards/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})});
//# sourceMappingURL=index-s7Yiebj9.js.map
